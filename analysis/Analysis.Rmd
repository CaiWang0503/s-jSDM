---
title: "Analysis"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## 1 - Runtime, inference and predictive performance on simulated data
### Default Parameters
#### BayesComm
- iterations = 50000
- burnin = 2500
- nchains = 2
- thin = 50

#### Hmsc
- iterations = 50000
- burnin = 5000
- nchains = 2
- thin = 50

#### C/G - DMVP
- epochs = 50L
- lr = 0.01
- batch_size = 10% of data
- nlatent = 50% of n species

#### GLLVM
- binomial with probit link
- with increasing number of species, nlatent -> 2 - 6


### Simulation

- sites: 50, 70, 100, 140, 180, 260, 320, 400, 500
- species: 0.1, 0.2, 0.3, 0.4,0.5
- env: 3,5,7
```{r}
# Generate data:
source("./analysis/scripts/1_generate_data.R")
```

We restricted number of cores to 6
```{r}
source("./analysis/scripts/1_gpu_deepjsdm.R")
source("./analysis/scripts/1_cpu_deepjsdm.R")
source("./analysis/scripts/1_gllvm.R")
source("./analysis/scripts/1_BayesCommDiag.R") # only fit to env = 5L and species = 0.1, 0.3, and 0.5
source("./analysis/scripts/1_hmscDiag.R") # only fit to env = 5L and species = 0.1, 0.3, and 0.5
```


## 2 Large Scale
- sites: 5000 to 31000 in steps by 2000
- species: 300, 500, 1000
- env: 5L
```{r}
source("./analysis/scripts/2_large_scale.R")
```


## 3 Covariance Behaviour
sites: from 50,by = 20, with length of 15
species: 50L (constant)
env: 3L
```{r}
source("./analysis/scripts/3_covariance_behaviour.R")
```



## 4 Case study 1 - Runtime
Fitted GLLVM and G-DMVP on datasets from Wilkinson et al. 2019
```{r}
source("./analysis/scripts/4_case_study_1.R")
```


## 5 Case Study - eDNA
```{r}
source("./analysis/scripts/5_eDNA_analysis.R")
```

